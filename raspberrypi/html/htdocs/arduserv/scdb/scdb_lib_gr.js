'use strict';
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
	class scdb_gr{
		constructor(hub,div){
			this.hub_handler=hub;
			this.div=div;
		}
		//////////
		parser_data(type,stream){
			//console.log(stream);
			console.log(stream);
			
			var div_p = document.createElement("div");
			document.getElementById(this.div).appendChild(div_p);
			create_div_from_array_to_db_gr("","conf",stream,div_p);
			
			var arr=new Array();
			create_array_from_div_to_db_gr(arr,div_p);
			console.log(arr);
		}
	}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	function autoboat_save_routing_sets_send_db(){
		var xmlhttprq_test = new XMLHttpRequest();
		xmlhttprq_test.open('POST', 'http://127.0.0.1:3128/htdocs/db/test/fname.json', true);//, true
		xmlhttprq_test.overrideMimeType('text/plain; charset=x-user-defined');
		xmlhttprq_test.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
		xmlhttprq_test.send(JSON.stringify(auto_boat_routing_sets,null, '\t'));
		//console.log(auto_boat_routing_sets);
		//console.log(JSON.stringify(auto_boat_routing_sets,null, ' '));
	}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	function create_div_from_array_to_db_gr(pre_fix,name,arr,div){
		//var arr=new Array();
		var i=0;
		var div_c = document.createElement("div");
		div.appendChild(div_c);
		
		for(var key in arr) {
			var div_c_c = document.createElement("div");
			div_c.appendChild(div_c_c);
			if(Array.isArray(arr[key]) || Array.isAssociativeArray(arr[key])){
				div_c_c.innerHTML+=pre_fix;
				create_div_from_array_to_db_gr(pre_fix+"|",key,arr[key],div_c);//!!!div_c
			}else{
				div_c_c.innerHTML+=pre_fix+"-"+name+"["+i+"]["+key+"]:"+arr[key];
			}
		}
		i++;
	}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	function create_array_from_div_to_db_gr(arr,div){
		//document.getElementById("tbl_db").children[0]
		//childElementCount: 4
		//id: ""
		//localName: "div"
		//console.log(div.children[0].children);
		var i=0;
		for(i=0;i<div.childElementCount;i++){
			if(div.children[i].childElementCount>0){
				arr.push(new Array());
				create_array_from_div_to_db_gr(arr,div.children[i]);
			}else{
				//console.log(div.children[i]);
				arr.push(div.children[i].innerText);
			}
		}
	}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
